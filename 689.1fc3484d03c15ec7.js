"use strict";(self.webpackChunkballistica_web=self.webpackChunkballistica_web||[]).push([[689],{9689:(y,c,r)=>{r.r(c),r.d(c,{LoginComponent:()=>l,LoginModule:()=>k});var g=r(9808),a=r(6696),t=r(5e3),p=r(520);new p.WM({"Content-Type":"application/json"});let d=(()=>{class o{constructor(n){this.http=n}getProxy(){return this.http.post("https://api2.bombsquad.ga/getproxy",{})}checkLoginProgress(n,e,s){return this.http.get("https://api2.bombsquad.ga/login",{params:{date:n,proxy:e,key:s},observe:"response"})}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(p.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=r(1573);function u(o,i){1&o&&(t.TgZ(0,"h2"),t._uU(1,"LOGIN V2"),t.qZA())}function _(o,i){1&o&&(t.TgZ(0,"h2"),t._uU(1,"LOGGED IN AS"),t.qZA())}function f(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.login())}),t._uU(1," Login with Ballistica V2 Account. "),t.qZA()}}function v(o,i){if(1&o&&(t.TgZ(0,"div"),t._uU(1," Complete your authentication.... "),t._UZ(2,"br"),t._uU(3," auto redirecting to "),t._UZ(4,"br"),t.TgZ(5,"a",9),t._uU(6),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(5),t.s9C("href",n.url,t.LSH),t.xp6(1),t.Oqu(n.url)}}function m(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",10),t._uU(1),t._UZ(2,"br")(3,"br"),t.TgZ(4,"div",8),t.NdJ("click",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.retry())}),t._uU(5," retry "),t.qZA()()}if(2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.error," ")}}function x(o,i){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,f,2,0,"div",6),t.YNc(2,v,7,2,"div",3),t.YNc(3,m,6,1,"div",7),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.url),t.xp6(1),t.Q6J("ngIf",n.url&&!n.error),t.xp6(1),t.Q6J("ngIf",n.error)}}function L(o,i){if(1&o&&(t.TgZ(0,"div",11),t._UZ(1,"br")(2,"br")(3,"img",12),t._uU(4),t.qZA()),2&o){const n=t.oxw();t.xp6(4),t.hij(" ",n.tag," ")}}let l=(()=>{class o{constructor(n,e,s){this.authService=n,this.tokenStorage=e,this.router=s,this.proxy="",this.key="",this.isLoggedIn=!1}ngOnInit(){this.tokenStorage.getToken()&&(this.tag=this.tokenStorage.getUser().tag,this.isLoggedIn=!0,this.router.navigate(["/mods"]))}login(){this.authService.getProxy().subscribe(n=>{this.date=JSON.stringify(n.end_command[1].s),this.proxy=n.end_command[1].p,this.key=n.end_command[1].k,this.url=n.open_url,setTimeout(()=>{this.child=window.open(this.url,"_blank")},2e3),this.checkProgress()})}checkProgress(){this.authService.checkLoginProgress(this.date,this.proxy,this.key).subscribe(n=>{var e;if(202==n.status)setTimeout(()=>{this.checkProgress()},3e3);else if(200==n.status){const s=JSON.parse(atob(n.body.token.split(".")[1]));this.tokenStorage.saveUser(s),this.tokenStorage.saveToken(n.body.token),null===(e=this.child)||void 0===e||e.close(),this.afterLoggedIn()}},n=>{this.error=n.error})}afterLoggedIn(){const n=this.tokenStorage.getUser();this.tag=n.tag,this.isLoggedIn=!0,setInterval(()=>{location.reload()},1e3)}retry(){location.reload()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d),t.Y36(h.i),t.Y36(a.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:8,vars:4,consts:[[1,"login-page"],[1,"login-options"],[1,"heading"],[4,"ngIf"],[1,"details"],["class","tag",4,"ngIf"],["class","login-btn",3,"click",4,"ngIf"],["class","error",4,"ngIf"],[1,"login-btn",3,"click"],[3,"href"],[1,"error"],[1,"tag"],["src","assets/img/icon_account_v2.svg","alt",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t.YNc(3,u,2,0,"h2",3),t.YNc(4,_,2,0,"h2",3),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,x,4,3,"div",3),t.YNc(7,L,5,1,"div",5),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("ngIf",!e.isLoggedIn),t.xp6(1),t.Q6J("ngIf",e.isLoggedIn),t.xp6(2),t.Q6J("ngIf",!e.isLoggedIn),t.xp6(1),t.Q6J("ngIf",e.isLoggedIn))},dependencies:[g.O5],styles:[".login-page[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:80px 0;min-height:65vh}.login-options[_ngcontent-%COMP%]{width:80%;margin:auto;white-space:pre-wrap}.login-options[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{text-align:center}.details[_ngcontent-%COMP%]{padding-top:40px;display:flex;justify-content:center}.login-btn[_ngcontent-%COMP%]{border:1px solid white;width:auto;padding-top:3.5px;cursor:pointer;height:30px;text-align:center}.tag[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}"]}),o})();const C=[{path:"",component:l}];let k=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,a.Bz.forChild(C)]}),o})()}}]);